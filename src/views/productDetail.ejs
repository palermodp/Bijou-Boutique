<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="website icon" type="png" href="images/brandmark@2x-8.png" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= products.name %> - Detalle</title>
    <link rel="stylesheet" href="/css/productDetail.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
</head>
<body>
    <%- include("partials/header.ejs", { user: user }) %>
    <main>
        <div class="product-container">
            <section class="product-image">
                <img src="/images/<%= products.image %>" alt="<%= products.name %>">
            </section>
            
            <section class="product-info">
                <h1 class="product-name"><%= products.name %></h1>
                <div class="product-price">
                    <p class="price">$<%= products.price %></p>
                    <% if (products.discount) { %>
                        <p class="discount"><%= products.discount %>% OFF</p>
                    <% } %>
                </div>

                <div class="product-description">
                    <p><%= products.description %></p>
                </div>

                <% if (products.category) { %>
                    <div class="product-category">
                        <p>Categor√≠a: <%= products.category %></p>
                    </div>
                <% } %>

                <% if (products.stock > 0) { %>
                    <div class="product-stock">
                        <p class="stock-status available">En stock (<%= products.stock %> disponibles)</p>
                        <div class="purchase-options">
                            <select class="quantity-select" name="quantity">
                                <% for(let i = 1; i <= Math.min(products.stock, 10); i++) { %>
                                    <option value="<%= i %>"><%= i %></option>
                                <% } %>
                            </select>
                            <button class="add-to-cart">Agregar al carrito</button>
                        </div>
                    </div>
                <% } else { %>
                    <p class="stock-status out-of-stock">Sin stock</p>
                <% } %>
            </section>
        </div>
    </main>
    <%- include("partials/footer.ejs") %>
</body>
</html>